<!doctype html>
<html class="no-js" lang="en">

<head>

    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="canonical" href="http://lostinpixelation.com/" />

    <title>Lost In Pixelation | Grunt Work</title>
    <meta name="description" content="The world of front-end development has become a complicated place</a>. For years we were free to live a life free from the command prompt, from frameworks, from fancy build processes. HTML, CSS, and Javascript were our only friends. But over the last few years, our toolbox has expanded at a mind-blowing pace. " />

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="icon" type="image/png" href="public/favicons/favicon.png" />

    <link rel="stylesheet" type="text/css" href="//cloud.typography.com/7082732/727286/css/fonts.css" />
    <link rel="stylesheet" type="text/css" href="public/css/main.2015030332.css" />

</head>

<body>

    <div class="wrapper">

        <div class="row">

            <input type="checkbox" id="modal-trigger" class="modal-trigger" />

            <div class="overlay"></div>

            <nav class="nav">

                <div class="nav__menu column-24">

                    <div class="nav__wrapper"><label class="nav__close-button" for="modal-trigger"></label><span class="nav__close-button__icon"></span></div>

                    <h3 class="nav__menu__header">Articles</h2>

                    <ul class="nav__menu__list">

                        <li class="nav__menu__list-item">

                            <span>01</span> <a href="/long-road-ahead">The Long Road Ahead</a>

                        </li><!--nav__menu__list-item -->

                        <li class="nav__menu__list-item">

                            <span>02</span> <a href="/designing-code">Designing Code</a>

                        </li><!--nav__menu__list-item -->

                        <li class="nav__menu__list-item">

                            <span>03</span> <a href="/grunt-work">Grunt Work</a>

                        </li><!--nav__menu__list-item -->

                    </ul><!-- nav_menu_list -->

                </div> <!-- .nav__menu -->

            </nav><!-- .nav -->

        </div><!-- row -->

        <header class="header">

            <div class="row">

                <div class="header__menu-wrapper"><label class="header__menu-button" for="modal-trigger"></label><span class="header__menu-button__icon"></span></div>

                <div class="column-24 desktop-column-24 tablet-column-12 phone-column-6">

                    <div class="header__logo">

                        <a href="/">

                            <div class="header__logo__row">
                                <div></div>
                                <div></div>
                                <div></div>
                            </div><!-- header__logo__row -->

                            <div class="header__logo__row">
                                <div></div>
                                <div></div>
                                <div></div>
                            </div><!-- header__logo__row -->

                            <div class="header__logo__row">
                                <div></div>
                                <div></div>
                                <div></div>
                            </div><!-- header__logo__row -->

                        </a>

                    </div><!-- header__logo-->

                    <h2 class="header__wordmark">Lost In Pixelation</h2>

                </div><!-- column -->

            </div><!-- header__menu-wrapper -->

        </header><!-- header -->

        <article class="article">

            <div class="row">

                <div class="column-24 desktop-column-24 tablet-column-12 phone-column-6">

                    <picture class="article__header-image" data-alt="Grunt Work" data-default-src="/public/img/article-img/grunt-work-large.jpg">
                        <source media="(min-width: 1440px)" srcset="/public/img/article-img/grunt-work-large.jpg 2513w">
                            <source media="(min-width: 800px)" srcset="/public/img/article-img/grunt-work-medium.jpg 1257w">
                                <source media="(max-width: 600px)" srcset="/public/img/article-img/grunt-work-small.jpg 628w">
                                    <source srcset="/public/img/article-img/grunt-work-large.jpg">
                                        <img src="/public/img/article-img/grunt-work-large.jpg" alt="Grunt Work">
                                    </picture>

                </div><!-- column -->

            </div><!-- row -->

                <div class="row">

                    <div class="prepend-1 column-17 desktop-prepend-1 desktop-column-17 tablet-column-8 phone-column-6">

                    <h1 class="article__headline"><span>Grunt Work</span></h1>

                   </div><!-- column -->

                    <aside class="aside column-6 desktop-column-6 tablet-column-4 phone-column-6">

                        <span class="aside__article-info">Volume 1 <span>|</span> Article 3 <span>|</span> March 5, 2015</span>

                    </aside><!-- aside -->

                </div><!-- row -->

                <div class="row">

                     <div class="prepend-6 column-12 append-6  desktop-prepend-6 desktop-column-12 desktop-append-6 tablet-prepend-1 tablet-column-10 tablet-append-1 phone-column-6 ">
                        <p class="opening-excerpt">The world of front-end development has become <a href="/designing-code">a complicated place</a>. For years we were free to live a life free from the command prompt, from frameworks, from fancy build processes. HTML, CSS, and Javascript were our only friends. But over the last few years, our toolbox has expanded at a mind-blowing pace. Pre-processors, frameworks, script loaders, package managers, the list goes on and on. It's a tremendous amount to manage.</p>

                        <p>It was only a matter of time before we came up with tools to handle&hellip;well, our tools. Task runners were devised to help us wrangle the plethora of things we need to manage inside of our project. Grunt.js is one such task runner. An open-source, command line tool built with JavaScript, meant to handle just this problem. If you can write JSON, you can use Grunt to automate everything from file compilation to image optimization.</p>

                        <h2>Installation</h2>

                        <p>Installation of Grunt is a breeze. To get started we need to install Node, which can be downloaded and installed from <a href="http://www.nodejs.org/" target="_blank">NodeJS.org</a>. Once that is complete, open terminal and run the following:</p>

                        <pre><code class="language-bash">npm install -g grunt-cli</code></pre>

                        <p>This will install the Grunt CLI globally on your system, but not Grunt itself. The Grunt CLI will run the version of Grunt you install for a particular project, allowing you to run different versions for different projects.</p>
        
                        <p>Grunt relies on two files. Gruntfile.js and package.json. Package.json manages your project's settings and plugins. <a href="http://gruntjs.com/plugins" target="_blank">Plugins</a> are the real power behind Grunt. There is a plugin for practically any task you can think of. The Grunt team even maintains a variety of officially supported plugins. Gruntfile.js is where you intialize and configure plugins and tasks.</p>

                        <h2>Configuration</h2>

                        <p>Let's start out with a bootstrap configuration before we dive depper. First up is our package.json file:</p>

                        <pre><code class="language-javascript">{
  'name': 'my-project-name',
  'version': '0.1.0',
  'devDependencies': {
  }
}</code></pre>

                        <p>Package.json is a common paradigm for any Node related project. Anyone who wants to run your project, can install all the necessary dependencies by simply typing `npm install` from the directory where your package.json file is located. This makes setup a breeze. The file itself contains a simple JSON object with basic information about our project. ‘Name’ is just an identifier for your project, this can be whatever value you like. ‘Version’ is the version number of our particular project, which you can increment manually. Last, and most importantly, is the ‘devDependencies’ object. This contains all the required packages for our project.</p>

                        <p>The first dependency we will install is Grunt itself. We can install Grunt by heading back to the command line and running the following from our project root:</p>
    
                        <pre><code class="language-bash">npm install grunt </code></pre>

                        <p>This will add the latest version of Grunt to your project. The`--save-dev` flag will add grunt to your dev dependencies. It is good to use this flag whenever adding a dependency to your project.</p>

                        <pre><code class="language-javascript">{
  'name': 'my-project-name',
  'version': '0.1.0',
  'devDependencies': {
    'grunt': '~0.4.5'
  }
}</code></pre>

                        <p>I mentioned in the beginning that you were not installing Grunt directly, but instead a CLI that runs Grunt. Each project you want to run Grunt with will have its own version. This is done to make code easier to maintain when Grunt updates, allowing you to upgrade Grunt on a per project basis. Another safeguard to ensure safe updating is  versioning notation. To avoid breaking changes, most dependencies are installed using a tilde version range. This restricts the automatic upgrading of packages to only minor versions, making upgrades to major release require a manual step. For example, a dependency with a version range of ~0.4.1 will upgrade automatically until 0.4.9, but would not automatically update to 0.5.0. This is handled automatically for you when a dependency is installed, but it is still good to know why it works this way.</p>

                        <p>For now, our Gruntfile.js file will remain very basic. All your tasks will be wrapped in a single Grunt function:</p>

                        <pre><code class="language-javascript">module.exports = function(grunt) {
  // Do grunt-related things in here
}</code></pre>

                        <p>Inside of this we will start with some basic configuration that initializes Grunt and points it to our package.json file:</p>

                        <pre><code class="language-javascript">module.exports = function(grunt) {

  grunt.initConfig({

    pkg: grunt.file.readJSON('package.json'),

  });

};</code></pre>

                        <h2>Your First Task</h2>

                        <p>We are going to start with a simple example, and something we always have a need for, image optimization. Using the official <a href="https://npmjs.org/package/grunt-contrib-imagemin" target="_blank">imagemin plugin</a>, we are going to have Grunt run a task that optimizes all our images. First, install the plugin by running the following from the root of your project:</p>

                        <pre><code class="language-bash">npm install grunt-contrib-imagemin --save-dev</code></pre>

                        <p>If you are running this on a Mac, you may get a pop-up to install a dependency library required to optimize your images. Follow the instructions in the linked Apple knowledge base article, and re-run the above command.</p>

                        <p>This will fetch the latest version of the imagemin plugin, as well as automatically add it to your package.json using the previously discussed tilde version range. To finish things up we need to initialize the plugin from our Gruntfile.js:</p>

                        <pre><code class="language-javascript">module.exports = function(grunt) {

  grunt.initConfig({

    pkg: grunt.file.readJSON('package.json'),

  });

  grunt.loadNpmTasks('grunt-contrib-imagemin');

};</code></pre>

                        <p>This is the process you will follow everytime you install a new plugin. Most documentation will include how to initiate the plugin download from Node Package Manager (NPM), as well as the argument to pass ’loadNpmTasks’ to load the plugin. The next step is to configure a task that leverages our new plugin. Here's what a basic configuration for imagemin looks like:</p>

                        <pre><code class="language-javascript">grunt.initConfig({
  imagemin: {                          // Task
    static: {                          // Target
      options: {                       // Target options
        optimizationLevel: 3
      },
      files: {                         // Dictionary of files
        'dist/img.png': 'src/img.png', // 'destination': 'source'
        'dist/img.jpg': 'src/img.jpg',
        'dist/img.gif': 'src/img.gif'
      }
    }
  }
});</code></pre>

                        <p>The parent object for each task is usually the name of the plugin. Your child objects are the names of the task. These can be whatever you like, in this case we are calling it 'static'. Next we have two more items: The first is ‘options’, which allows you the pass a configuration object. In this case, we are going to pass it an optimization level for our compressed images. Note this only affects the static subtask. Refer to each plugins documentation for a list of available options.</p>

                        <p>The next item is a file matching pattern. This tells the plugin what images to modify. There are <a href="https://github.com/gruntjs/grunt/wiki/Configuring-tasks#files" target="_blank">several accepted formats</a> for this. I prefer to use the <a href="https://github.com/gruntjs/grunt/wiki/Configuring-tasks#files-array-format" target="_blank">Files Array format</a>, as it allows you to declare several source locations per destination, while also allowing you to pass multiple mappings per object. In this example, we will pass it a couple specific images to optimize.</p>

                        <p>We now have enough to run the task. Pull up your command line and run the following from your terminal:</p>

                        <pre><code class="language-bash">grunt imagemin.static</code></pre>

                        <p>You should now see some logs in terminal with the results of our optimizations, as well as new, compressed images in our destination folder. Each time we run this command, Grunt will optimize any images we pass in the file object. While this is not always the case, this particular plugin will cache what images it has optimized, and only optimize the ones that are new or changed.</p>

                        <h2>Dynamic File Paths</h2>

                        <p>Now that we have your first task out of the way, we'll work on making it more useful. In a practical application, you probably do not want to continually update a list of files. Instead, we can configure our task do this automatically:</p>

                        <pre><code class="language-javascript">grunt.initConfig({
  imagemin: {                          // Task
    static: {                          // Target
      options: {                       // Target options
        optimizationLevel: 3
      },
      files: {                         // Dictionary of files
        'dist/img.png': 'src/img.png', // 'destination': 'source'
        'dist/img.jpg': 'src/img.jpg',
        'dist/img.gif': 'src/img.gif'
      }
    },
    dynamic: {                         // Another target
      files: [{
        expand: true,                  // Enable dynamic expansion
        cwd: 'src/',                   // Src matches are relative to this path
        src: ['src/**/*.{png,jpg,gif}'],   // Actual patterns to match
        dest: 'dist/'                  // Destination path prefix
      }]
    }
  }
});
</code></pre>

                        <p>In our new ‘dynamic’ task we are now using a slightly different file object format that allows us to pass in a couple new options. The ‘expand’ property tells a plugin whether or not to dynamically expand your target list, which basically just means it will find every file within the source object you specify. This way, if you add a new folder or file, you will not have to update your source list manually. The ‘cwd’ property sets the root that all your file paths will be relative to. In this example, we are going to set it to our ‘/src’ folder. Next, we pass our familiar ‘src’ property, this time using some wildcards. ‘**/*’ tells imagemin to target any file in any child folders. This combined with ‘expand’ being set to true will cover any new folders and files within '/src'. We are also limiting it to only PNG, JPG, and GIF files. Lastly, we pass a destination as in our previous task. We only need to declare the root ‘dest’ folder, as Grunt will retain the paths and file structure of the source folder when it creates the new images.</p>

                        <p>Let's give this one a whirl by putting the following into terminal:</p>

                        <pre><code class="language-bash">grunt imagemin.dynamic</code></pre>

                        <p>Now any image we add in the ‘src’ folder will be optimized and placed in its relative location within the destination folder.</p>

                        <h2>Running Multiple Tasks</h2>

                        <p>Grunt does not limit you to running just one task at a time. You can also run a series of tasks with a single command. To demonstrate this, we will further expand on our image optimization workflow. For this we will install a new plugin: <a href="https://npmjs.org/package/grunt-svg2png" target="_blank">SVG2PNG</a>. This plugin will convert our SVGs into a PNG to use as a fallback for older browsers. Follow what we covered above to install SVG2PNG into our project. Once that is done, add a new task object to our Gruntfile.js:</p>

                        <pre><code class="language-javascript">svg2png: {
        all: {
            // specify files in array format with multiple src-dest mapping
            files: [{
                expand: true,                  // Enable dynamic expansion
                cwd: 'src/',                   // Src matches are relative to this path
                src: ['src/**/*.{svg}'],   // Actual patterns to match
                dest: 'dist/'                  // Destination path prefix
            }]
        }
    }</code></pre>

                        <p>This should look very similar to how we handled image optimization. We have created a subtask called ‘all’ and are passing it a dynamic list of SVGs. Those are then converted and placed into a ‘png’ folder within the ‘/dist’ folder. Now we  just run this task like before, followed by our dynamic image optimization task to optimize the generated PNGs, but there is a quicker way. To accomplish that, create a new section at the bottom of the GruntFile:</p>

                        <pre><code class="language-javascript">grunt.registerTask('process-images', ['svg2png.all', 'imagemin.dynamic']);</code></pre>

                        <p>The `registerTask` method gets passed 2 arguments: The name of the new task, and an object containing the tasks you want it to run. The tasks are run in the order they appear in the array, and are blocking, meaning the second one will not start until the first one finishes. Now we can go to our terminal and run:</p>

                        <pre><code class="language-bash">grunt process-images</code></pre>

                        <p>This will first convert our SVGs in our `/src` folder to PNGs, then will run our dynamic image optimization as before. You can see where this can really save some time. Now with a single command we convert and optimize all our image assets.</p>

                        <h2>Running Tasks Automatically</h2>

                        <p>While what we have up to this point is incredibly useful, we can take it one step further. Grunt has an incredibly useful plugin called <a href="https://npmjs.org/package/grunt-contrib-watch" target="_blank">Watch</a>. This plugin will monitor specific file/folder patterns and run tasks automatically when it detects a change. This is avoids us having to switch back to the terminal repeatedly to run a task. Go ahead and install Watch into the project. Once that is done, we can add our new Watch task:</p>

                        <pre><code class="language-javascript">watch: {
  images: {
    files: ['src/**/*'],
    tasks: ['process-images'],
  },
},</code></pre>

                        <p>Watch contains child tasks that are run automatically when certain conditions are met. In this case the `Images` will run our `process-images` task, whenever it detects a change in our `/src` folder. Once this is done, head over to terminal and run:</p>

                        <pre><code class="language-bash">grunt watch</code></pre>

                        <p>You will now see a prompt that our Watch task is waiting. Now whenver we make a change to an image in the ‘src’ folder, the Watch task will trigger our custom image processing task automatically. As long as the Watch task is running, this will be done without any interaction!</p>

                        <h2>Conclusion</h2>

                        <p class="closing-excerpt">Hopefull,y this gives you a glimpse of the time savings Grunt can provide for your workflow. This is just the tip of the iceberg, Grunt can handle more than just images. Pre-processing CSS, file cleanup, and cache-busting are just some of things you can automate. Be sure to check out the <a href="http://gruntjs.com/plugins" target="_blank">plugin section</a> of the Grunt website to see everything that is possible.</p>

                    </div><!-- column -->

                </div><!-- row -->

            </article><!-- article -->

            <div class="row">

                <div  class="prepend-3 desktop-prepend-2 column-18 desktop-column-20 tablet-column-12 phone-column-6 append-3 desktop-append-2 ">

                    <footer class="footer">

                        <div class="row"> 

                            <div class="column-12 desktop-column-12 tablet-column-8 phone-column-6">

                                <ul class="footer__social-links">
                                    <li class="footer__social-links__item"><a class="ss-twitter" href="http://twitter.com/b_hough" target="_blank"></a></li>
                                    <li class="footer__social-links__item"><a class="ss-dribbble"href="http://dribbble.com/b_hough" target="_blank"></a></li>
                                    <li class="footer__social-links__item"><a class="ss-octocat"href="http://github.com/bhough" target="_blank"></a></li>
                                    <li class="footer__social-links__item"><a class="ss-linkedin"href="http://linkedin.com/in/brhough" target="_blank"></a></li>
                                    <li class="footer__social-links__item"><a class="ss-instagram"href="http://instagram.com/b_hough" target="_blank"></a></li>
                                </ul>

                            </div><!-- column -->

                            <div class="column-12 desktop-column-12 tablet-column-4 phone-column-6">

                                <span class="footer__copyright">&copy; 2011-2015<span> Lost In Pixelation, All Rights Reserved.</span></span>

                            </div><!-- column -->

                        </div><!-- row -->

                    </footer><!-- footer -->

                </div><!-- column -->

            </div><!-- row -->

        </div><!-- wrapper -->

        <!-- Google Analytics -->

        <script src="source/js/prism.js"></script>

        <script>

          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-59477488-1', 'auto');
          ga('send', 'pageview');

      </script>

      <script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

    </body>

</html>